webpackJsonp([61],{1055:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=i(852),a=i.n(l),n=i(158),s=i.n(n),o=i(909),r=i.n(o),u=i(284),p=i(105),c=[{key:"CN",display_name:"中国"},{key:"US",display_name:"美国"},{key:"JP",display_name:"日本"},{key:"EU",display_name:"欧元区"}],d=c.reduce(function(t,e){return t[e.key]=e.display_name,t},{});e.default={name:"table_demo",data:function(){var t;return{list:null,total:null,listLoading:!0,listQuery:{page:1,limit:20,importance:void 0,title:void 0,type:void 0,sort:"+id"},temp:(t={id:"",name:"",title:"",plottype:""},r()(t,"title",""),r()(t,"type",""),r()(t,"status","published"),t),importanceOptions:[1,2,3],calendarTypeOptions:c,sortOptions:[{label:"按ID升序列",key:"+id"},{label:"按ID降序",key:"-id"}],statusOptions:["published","draft","deleted"],plottypeOptions:[{value:"1",label:"新用户剧情"},{value:"2",label:"主线剧情"}],dialogFormVisible:!1,dialogStatus:"",textMap:{update:"编辑",create:"创建"},dialogPvVisible:!1,pvData:[],showAuditor:!1,tableKey:0}},created:function(){this.getList()},filters:{statusFilter:function(t){return{published:"success",draft:"gray",deleted:"danger"}[t]},typeFilter:function(t){return d[t]}},methods:{getList:function(){var t=this;this.listLoading=!0,i.i(u.n)(this.listQuery).then(function(e){t.list=e.data.content,t.total=e.data.total,t.listLoading=!1})},handleFilter:function(){this.getList()},handleSizeChange:function(t){this.listQuery.limit=t,this.getList()},handleCurrentChange:function(t){this.listQuery.page=t,this.getList()},timeFilter:function(t){if(!t[0])return this.listQuery.start=void 0,void(this.listQuery.end=void 0);this.listQuery.start=parseInt(+t[0]/1e3),this.listQuery.end=parseInt((+t[1]+864e5)/1e3)},handleModifyStatus:function(t,e){var l;l=t,i.i(u.o)(l).then(function(t){t.data.items&&console.log(t)}),this.$message({message:"操作成功",type:"success"}),t.status=e;var a=this.list.indexOf(t);this.list.splice(a,1)},handleCreate:function(){this.resetTemp(),this.dialogStatus="create",this.dialogFormVisible=!0},handleUpdate:function(t){this.temp=s()({},t),this.temp.oldplottype=this.temp.plottype,this.dialogStatus="update",this.dialogFormVisible=!0},handleDelete:function(t){this.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3});var e=this.list.indexOf(t);this.list.splice(e,1)},create:function(){this.temp.id=parseInt(100*Math.random())+1024,this.temp.timestamp=+new Date,this.temp.author="原创作者",this.list.unshift(this.temp),this.dialogFormVisible=!1,this.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3})},update:function(){var t=this,e=!0,l=!1,n=void 0;try{for(var s,o=a()(this.list);!(e=(s=o.next()).done);e=!0){var r=s.value;if(r.id===this.temp.id){var p=this.list.indexOf(r);this.list.splice(p,1,this.temp);break}}}catch(t){l=!0,n=t}finally{try{!e&&o.return&&o.return()}finally{if(l)throw n}}this.dialogFormVisible=!1;var c;c=this.temp,i.i(u.p)(c).then(function(e){e.data.items&&(console.log(e),t.userLIstOptions=e.data.items.map(function(t){return{key:t.name}}))}),this.$notify({title:"成功",message:"更新成功",type:"success",duration:2e3})},resetTemp:function(){this.temp={id:void 0,importance:0,remark:"",timestamp:0,title:"",status:"published",type:""}},handleFetchPv:function(t){var e=this;fetchPv(t).then(function(t){e.pvData=t.data.pvData,e.dialogPvVisible=!0})},handleDownload:function(){var t=this;i.e(101).then(function(){var e=i(869),l=e.export_json_to_excel,a=["时间","地区","类型","标题","重要性"],n=["timestamp","province","type","title","importance"];l(a,t.formatJson(n,t.list),"table数据")}.bind(null,i)).catch(i.oe)},formatJson:function(t,e){return e.map(function(e){return t.map(function(t){return"timestamp"===t?i.i(p.a)(e[t]):e[t]})})}}}},1336:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container calendar-list-container"},[i("div",{staticClass:"filter-container"},[i("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"姓名"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13))return null;t.handleFilter(e)}},model:{value:t.listQuery.name,callback:function(e){t.listQuery.name=e},expression:"listQuery.name"}}),t._v(" "),i("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"天"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13))return null;t.handleFilter(e)}},model:{value:t.listQuery.day,callback:function(e){t.listQuery.day=e},expression:"listQuery.day"}}),t._v(" "),i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",icon:"search"},on:{click:t.handleFilter}},[t._v("搜索")]),t._v(" "),i("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"document"},on:{click:t.handleDownload}},[t._v("导出")])],1),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:t.listLoading,expression:"listLoading",modifiers:{body:!0}}],key:t.tableKey,staticStyle:{width:"100%"},attrs:{data:t.list,border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{align:"center",label:"序号",width:"65"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.id))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"天",width:"65"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.day))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"步",width:"65"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.step))])]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"180px",align:"center",label:"姓名"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{staticClass:"link-type",on:{click:function(i){t.handleUpdate(e.row)}}},[t._v(t._s(e.row.name))])]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"180px",align:"center",label:"标题"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.title))])]}}])}),t._v(" "),i("el-table-column",{attrs:{"min-width":"150px",label:"剧情类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.plottype?i("span",[t._v("新用户剧情")]):t._e(),t._v(" "),2==e.row.plottype?i("span",[t._v("主线剧情")]):t._e()]}}])}),t._v(" "),i("el-table-column",{attrs:{"min-width":"150px",label:"消息类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.msgtype?i("span",[t._v("普通视频")]):t._e(),t._v(" "),1==e.row.msgtype?i("span",[t._v("交互视频")]):t._e(),t._v(" "),2==e.row.msgtype?i("span",[t._v("电话")]):t._e(),t._v(" "),3==e.row.msgtype?i("span",[t._v("文字聊天")]):t._e(),t._v(" "),4==e.row.msgtype?i("span",[t._v("语音聊天")]):t._e(),t._v(" "),5==e.row.msgtype?i("span",[t._v("图片聊天")]):t._e(),t._v(" "),6==e.row.msgtype?i("span",[t._v("小游戏")]):t._e(),t._v(" "),7==e.row.msgtype?i("span",[t._v("小视频")]):t._e()]}}])}),t._v(" "),i("el-table-column",{attrs:{"class-name":"status-col",label:"状态",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-tag",{attrs:{type:t._f("statusFilter")(e.row.status)}},[t._v(t._s(e.row.status))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return["published"!=e.row.status?i("el-button",{attrs:{size:"small",type:"success"},on:{click:function(i){t.handleModifyStatus(e.row,"published")}}},[t._v("发布\n        ")]):t._e(),t._v(" "),"draft"!=e.row.status?i("el-button",{attrs:{size:"small"},on:{click:function(i){t.handleModifyStatus(e.row,"draft")}}},[t._v("草稿\n        ")]):t._e(),t._v(" "),"deleted"!=e.row.status?i("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(i){t.handleModifyStatus(e.row,"deleted")}}},[t._v("删除\n        ")]):t._e()]}}])})],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.listLoading,expression:"!listLoading"}],staticClass:"pagination-container"},[i("el-pagination",{attrs:{"current-page":t.listQuery.page,"page-sizes":[10,20,30,50],"page-size":t.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.listQuery.page=e}}})],1),t._v(" "),i("el-dialog",{attrs:{title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{staticClass:"small-space",staticStyle:{width:"400px","margin-left":"50px"},attrs:{model:t.temp,"label-position":"left","label-width":"70px"}},[i("el-form-item",{attrs:{label:"姓名"}},[i("el-input",{model:{value:t.temp.name,callback:function(e){t.temp.name=e},expression:"temp.name"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"类型"}},[i("el-select",{staticClass:"filter-item",attrs:{placeholder:"请选择"},model:{value:t.temp.plottype,callback:function(e){t.temp.plottype=e},expression:"temp.plottype"}},t._l(t.plottypeOptions,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),i("el-form-item",{attrs:{label:"标题"}},[i("el-input",{model:{value:t.temp.title,callback:function(e){t.temp.title=e},expression:"temp.title"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"msg"}},[i("el-input",{model:{value:t.temp.msg,callback:function(e){t.temp.msg=e},expression:"temp.msg"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"havenxt"}},[i("el-input",{model:{value:t.temp.havenxt,callback:function(e){t.temp.havenxt=e},expression:"temp.havenxt"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"nxtmsg"}},[i("el-input",{model:{value:t.temp.nxtmsg,callback:function(e){t.temp.nxtmsg=e},expression:"temp.nxtmsg"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"ivmsg"}},[i("el-input",{model:{value:t.temp.ivmsg,callback:function(e){t.temp.ivmsg=e},expression:"temp.ivmsg"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"ivselect1"}},[i("el-input",{model:{value:t.temp.ivselect1,callback:function(e){t.temp.ivselect1=e},expression:"temp.ivselect1"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"ivurl1"}},[i("el-input",{model:{value:t.temp.ivurl1,callback:function(e){t.temp.ivurl1=e},expression:"temp.ivurl1"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"ivselect2"}},[i("el-input",{model:{value:t.temp.ivselect2,callback:function(e){t.temp.ivselect2=e},expression:"temp.ivselect2"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"ivurl2"}},[i("el-input",{model:{value:t.temp.ivurl2,callback:function(e){t.temp.ivurl2=e},expression:"temp.ivurl2"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("关 闭")])],1)],1),t._v(" "),i("el-dialog",{attrs:{title:"阅读数统计",visible:t.dialogPvVisible,size:"small"},on:{"update:visible":function(e){t.dialogPvVisible=e}}},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.pvData,border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{prop:"key",label:"渠道"}}),t._v(" "),i("el-table-column",{attrs:{prop:"pv",label:"pv"}})],1),t._v(" "),i("span",{staticClass:"dialog-footer",slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogPvVisible=!1}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]}},818:function(t,e,i){var l=i(19)(i(1055),i(1336),null,null,null);t.exports=l.exports},852:function(t,e,i){t.exports={default:i(853),__esModule:!0}},853:function(t,e,i){i(160),i(159),t.exports=i(854)},854:function(t,e,i){var l=i(40),a=i(285);t.exports=i(26).getIterator=function(t){var e=a(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return l(e.call(t))}},908:function(t,e,i){t.exports={default:i(910),__esModule:!0}},909:function(t,e,i){"use strict";e.__esModule=!0;var l=i(908),a=function(t){return t&&t.__esModule?t:{default:t}}(l);e.default=function(t,e,i){return e in t?(0,a.default)(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}},910:function(t,e,i){i(911);var l=i(26).Object;t.exports=function(t,e,i){return l.defineProperty(t,e,i)}},911:function(t,e,i){var l=i(39);l(l.S+l.F*!i(41),"Object",{defineProperty:i(42).f})}});
//# sourceMappingURL=61.cd6b66374d919b4276b8.js.map